<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>UOX3 API and Event handling document</title>
<style></style>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
<center>
	<h1>UOX3 Script Engine</h1>
	<h3>API and Event handling</h3>
</center>


<h3><a name="Town">Town Related Functions</a></h3>

<table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTownRegion">GetTownRegion</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetTownRegion( regionID );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns region object for the specified region
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
var myRegion = GetTownRegion( regionID );
</pre></table>

<table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_IsMemberOfTown">IsMemberOfTown</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>bool IsMemberOfTown( pChar, town );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns true if pChar is a member of town
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>if( IsMemberOfTown( pTalking, GetTown( pTalkingTo ) ) )
<br>{
<br>	TextMessage( pTalkingTo, "Hello fellow town member" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTownMayor">GetTownMayor</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>PLAYER GetTownMayor( town );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns a handle to the mayor of the town.  If == -1, then there is no mayor
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>if( GetTownMayor( GetTown( pTalkingTo ) ) == pTalking )
<br>{
<br>	TextMessage( pTalkingTo, "Why hello mayor, how are you?" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTownRace">GetTownRace</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>RACEID GetTownRace( town );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the race that is associated with the town.  Default is race 0.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iRace = GetRace( pTalking );
<br>var iTownRace = GetTownRace( GetTown( pTalkingTo ) );
<br>if( RaceCompareByRace( iTownRace, iRace )  < 0 )
<br>{
<br>	TextMessage( pTalkingTo, "Guards!  Guards!  Where the HELL are the guards?" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetTownRace">SetTownRace</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetTownRace( town, newRace );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the race of town to newRace
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetTownRace( GetRace( pTalking ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_PossessTown">PossessTown</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>PossessTown( srcTown, trgTown );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>srcTown takes over the town of trgTown.  This means they get the treasury and other resources accumulated by trgTown.  It also turns the guards over to them.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iSrc = GetTown( pTalking );
<br>var iTrg = GetTown( pTalkingTo );
<br>PossessTown( iSrc, iTrg );
<br>TextMessage( pTalkingTo, "You are my new... master" );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTownTax">GetTownTax</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTownTaxResource">GetTownTaxResource</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEMID GetTownTaxResource( town );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the ID of the town's primary tax resource.  Normally, it would be 0x0EED (gold), but it may be something else.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iID = GetTownTaxResource( GetTown( pTalking ) );
<br>if( iID == 0x0EED )
<br>{
<br>	TextMessage( pTalkingTo, "Gimme all your tax money, knave!" );
<br>}
</pre></table>

<center>
<font face="Tahoma,Arial,MS Sans Serif" size="1">©Copyright 2000-2001 <a href="http://www.uox3.net">WWW.UOX3.NET</a> (Daniel Stratton/Matthew Randall)</font>
</center>

</body>