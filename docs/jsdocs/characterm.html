<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>UOX3 API and Event handling document</title>
<style></style>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
<center>
	<h1>UOX3 Script Engine</h1>
	<h3>Functions, Methods, Properties and Event handling</h3>
</center>
<h3><a name="CharFuncs">Character Related Methods</a></h3>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan="3" class="method"><a name="TextMessage">TextMessage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void TextMessage( message );<br>void TextMessage( message, allHear, txtHue );<br>void TextMessage( message, allHear, txtHue, speechTarget, speechTargetSerial, speechFontType );</pre>
<tr><td class="property">Purpose		<td class="value">Causes the object to say a message.<br><br>The function has 5 extra optional arguments (if including an optional parameter, make sure to also include the preceding argument):<br>
<strong>allHear</strong> (broadcast true/false)<br>
<strong>txtHue</strong> (colour of the text sent to the client)<br>
<strong>speechTarget</strong> (intended target of message. 0 = only visible to sender and receiver, 1 = visible to all players in range, 2 = visible to all NPCs and players in range, 3 = visible to all PCs everywhere + NPCs in range, 4 = visible to all PCs everywhere (broadcast), 5 = only visible to receiver)<br>
<strong>speechTargetSerial</strong> (serial of the receiver of the message, used if speechTarget is 0 or 5)<br>
<strong>speechFontType</strong> (type of font to use. Defaults to normal. 0 = bold, 1 = normal with shadow, 2 = bold with shadow, 3 = normal, 4 = gothic, 5 = italic, 6 = small and dark, 7 = colourful, 8 = runic (only works with CAPS), 9 = small and light)
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.TextMessage( "Hello world!" );<br>
myChar.TextMessage( "Public, ice-coloured message sent to everyone as if I said it.", true, 0x0480 );<br>
myChar.TextMessage( "Private, ice-coloured message just for me!", false, 0x0480 );
myNPC.TextMessage( "This is a private message from one character to a character!", false, 0, 0, myChar.serial );
myNPC.TextMessage( "THIS IS A MESSAGE IN RUNIC LETTERS VISIBLE TO ALL", true, 0, 3, null, 8 );</pre>
</table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="YellMessage">YellMessage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void YellMessage( message );</pre>
<tr><td class="property">Purpose		<td class="value">Causes the Char to yell a message to all players within range
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.YellMessage( "YARGH!" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="WhisperMessage">WhisperMessage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void WhisperMessage( message );</pre>
<tr><td class="property">Purpose		<td class="value">Causes the Char to whisper a message that can be seen only by nearby players
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.WhisperMessage( "Shhhhh, we're hunting wabbits!" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="EmoteMessage">EmoteMessage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void EmoteMessage( message );</pre>
<tr><td class="property">Purpose		<td class="value">Causes the Char to emote message. You have to put the start and end * manually in!
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.EmoteMessage( "*looks around*" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Delete">Delete</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Delete();</pre>
<tr><td class="property">Purpose		<td class="value">Causes the Char to be deleted.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.Delete();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="DoAction">DoAction</a>
<tr><td class="property">Prototype		<td class="value"><pre>void DoAction( trgAction subAction );</pre>
<tr><td class="property">Purpose		<td class="value">Makes Char do action trgAction. Some gargoyle-specific animations uses a subAction to determine which animation to play.<br>
<strong>Pre-v7.0.0.0:</strong><br>
Human/Elf actions range from 0x01 to 0x22.<br>
Animals have animations in 0x00 to 0x0c range.<br>
Monsters have animations in 0x00 to 0x15 range, though not all monsters support all these animations.<br>
<strong>v7.0.0.0+:</strong><br>
All character actions range from 0x00 to 0x0f, with some animations registered as sub-actions<br>
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.DoAction( 0x0B );
// or a gargoyle action & subaction
myChar.DoAction( 0x00, 0x03 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SoundEffect">SoundEffect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SoundEffect( soundID, bAllHear );</pre>
<tr><td class="property">Purpose		<td class="value">Plays a sound from Character. SoundID is the full ID of the sound to play. If bAllHear is TRUE, then everyone nearby hears it. If it's false, then only the Character hears it.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.SoundEffect( 568, TRUE );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SellTo">SellTo</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SellTo( targNPC );</pre>
<tr><td class="property">Purpose		<td class="value">Brings up the shopkeeper gump for selling to a vendor targNPC.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.SellTo( myNPC );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="BuyFrom">BuyFrom</a>
<tr><td class="property">Prototype		<td class="value"><pre>void BuyFrom( targNPC );</pre>
<tr><td class="property">Purpose		<td class="value">Brings up the shopkeeper gump or PV backpack for buying for vendor targNPC.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.BuyFrom( myNPC );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="HasSpell">HasSpell</a>
<tr><td class="property">Prototype		<td class="value"><pre>bool HasSpell( spellNum );</pre>
<tr><td class="property">Purpose		<td class="value">Scans through player's contents to see if they have spellNum in the first spellbook encountered
<tr><td class="property">Example of Usage	<td class="value"><pre>if(myPlayer.HasSpell( 0 )==1);
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="RemoveSpell">RemoveSpell</a>
<tr><td class="property">Prototype		<td class="value"><pre>void RemoveSpell( spellNum );</pre>
<tr><td class="property">Purpose		<td class="value">Removes spellNum from player's spellbook
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.RemoveSpell( 0 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="OpenBank">OpenBank</a>
<tr><td class="property">Prototype		<td class="value"><pre>void OpenBank( trgSock );</pre>
<tr><td class="property">Purpose		<td class="value">Open's Char's bank, sending it to trgSock
<tr><td class="property">Example of Usage	<td class="value"><pre>myPlayer.OpenBank(trgSock);
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="DirectionTo">DirectionTo</a>
<tr><td class="property">Prototype		<td class="value"><pre>unsigned char DirectionTo( trgObj );
unsigned char DirectionTo( x, y );</pre>
<tr><td class="property">Purpose		<td class="value">Returns the direction from character to trgObj/location
<tr><td class="property">Example of Usage	<td class="value"><pre>var dir = myChar.DirectionTo( trgChar );
var dir = myChar.DirectionTo( trgChar.x, trgChar.y );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="TurnToward">TurnToward</a>
<tr><td class="property">Prototype		<td class="value"><pre>void TurnToward( trgObj );
void TurnToward( x, y );</pre>
<tr><td class="property">Purpose		<td class="value">Char turns to trgObj.
<tr><td class="property">Example of Usage	<td class="value"><pre>myNPC.TurnToward( myObject );
myNPC.TurnToward( myObject.x, myObject.y );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="ResourceCount">ResourceCount</a>
<tr><td class="property">Prototype		<td class="value"><pre>int ResourceCount( realitemid, colour );</pre>
<tr><td class="property">Purpose		<td class="value">Returns the amount of items with specified ID realitemid and colour from character's backpack
<tr><td class="property">Example of Usage	<td class="value"><pre>if(myChar.ResourceCount( 0x1BF2, 0 ));
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="UseResource">UseResource</a>
<tr><td class="property">Prototype		<td class="value"><pre>int UseResource( amount, realitemid );
void UseResource( amount, realitemid, colour );</pre>
<tr><td class="property">Purpose		<td class="value">Removes amount of items with specified ID realitemid from character's backpack, and returns amount deleted
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.UseResource( 5, 0x1BF2, 0 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="CustomTarget">CustomTarget</a>
<tr><td class="property">Prototype		<td class="value"><pre>void CustomTarget( tNum, toSay );</pre>
<tr><td class="property">Purpose		<td class="value">Very similar to PopUpTarget. It's a callback situation instead. tNum must be between 0 and 255. Says toSay, and shows a cursor. Reenters the script associated with the socket's player (ie player who gets the cursor). Enters function name based on the value of tNum. if tNum is 0, then the function would be onCallback0. Prototype of callback is: <pre>function onCallback0( tSock, targSerial )</pre>
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.CustomTarget( 0, "Select your custom target:" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="PopUpTarget">PopUpTarget</a>
<tr><td class="property">Prototype		<td class="value"><pre>void PopUpTarget( tNum, toSay );</pre>
<tr><td class="property">Purpose		<td class="value">Provides a call to an inbuilt popup target. tNum must be between 0 and 255 inclusive. Says toSay, and shows a cursor. Note that this allows access potentially to GM functions.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.PopUpTarget( 2, "Where do you wish to teleport to?" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="InRange">InRange</a>
<tr><td class="property">Prototype		<td class="value"><pre>bool InRange( trgObj, distance );</pre>
<tr><td class="property">Purpose		<td class="value">Returns true if the distance to trgObj is less than distance
<tr><td class="property">Example of Usage	<td class="value"><pre>if( myChar.InRange( trgObj, 18 ))
	{
		myChar.TextMessage( "I'm within range!" );
	}
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="FindItemLayer">FindItemLayer</a>
<tr><td class="property">Prototype		<td class="value"><pre>*Item FindItemLayer( layer );</pre>
<tr><td class="property">Purpose		<td class="value">A return value of -1 indicates there was no item at that particular layer. A common list of layers follow<br>
<br>0x01	- Single-Hand item/weapon
<br>0x02	- Two-Hand item/weapon (including Shield)
<br>0x03	- Foot Covering/Armor
<br>0x04	- Leg Covering (including Pants, Shorts, Bone/Chain/Ring legs)
<br>0x05	- Chest Clothing/Female Chest Armor
<br>0x06	- Head Covering/Armor
<br>0x07	- Hand Covering/Armor
<br>0x08	- Ring
<br>0x09	- N/A (not used)
<br>0x0A	- Neck Covering/Armor
<br>0x0B	- Hair
<br>0x0C	- Waist (Half-Apron)
<br>0x0D	- Torso (inner)(Chest Armor)
<br>0x0E	- Bracelet
<br>0x0F	- N/A (no info)
<br>0x10	- Facial Hair
<br>0x11	- Torso (Middle)(Surcoat, Tunic, Full Apron, Sash)
<br>0x12	- Earrings
<br>0x13	- Arm Covering/Armor
<br>0x14	- Back (Cloak)
<br>0x15	- BackPack
<br>0x16	- Torso (outer)(Robe)
<br>0x17	- Legs (outer)(Skirt/Kilt)
<br>0x18	- Legs (inner)(Leg Armor)
<br>0x19	- Mount (Horse, Ostard, etc.)
<br>0x1A	- NPC Buy Restock Container
<br>0x1B	- NPC Buy No Restock Container
<br>0x1C	- NPC Sell Container
<br>0x1D	- Bank Box
<tr><td class="property">Example of Usage	<td class="value"><pre>lefthand=myChar.FindItemLayer(1);
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="StartTimer">StartTimer</a>
<tr><td class="property">Prototype		<td class="value"><pre>void StartTimer( numMiliSec, timerID, callback );</pre>
<tr><td class="property">Purpose		<td class="value">Starts a timer that will elapse after numHundredthsOfSec seconds pass, for a character tChar. timerID must be between 0 and 100. Resulting onTimer event will be triggered. Which script it triggers in depends on the (optional, defaults to false) third parameter, which can be <strong>true</strong> (calls back to existing script), <strong>false</strong> (calls back into object's script) or an <strong>int</strong> (scriptID to call back to). This optional parameter defaults to false if not specified.
<tr><td class="property">Example of Usage
<td class="value"><pre>myChar.StartTimer( 600, 0, true ); //Timer calls back to object's script</br>
myChar.StartTimer( 1200, 0, false ); //Timer calls back to existing script</br>
myChar.StartTimer( 1200, 0, 2012 ); //Timer calls back to script with ID 2012
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="CheckSkill">CheckSkill</a>
<tr><td class="property">Prototype		<td class="value"><pre>bool CheckSkill( skillnum, minskill, maxskill );</pre>
<tr><td class="property">Purpose		<td class="value">Returns true if the skill skillnum is between min and may skill.
<tr><td class="property">Example of Usage	<td class="value"><pre>if( myChar.CheckSkill( 1, 200, 1000))
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SpeechInput">SpeechInput</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SpeechInput( speechID );</pre>
<tr><td class="property">Purpose		<td class="value">Calls up the onSpeechInput event with the <br>text the user types.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.SpeechInput( 1 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="CastSpell">CastSpell</a>
<tr><td class="property">Prototype		<td class="value"><pre>void CastSpell( spellNum );</pre>
<tr><td class="property">Purpose		<td class="value">Causes character to cast spellNum. Character can be an NPC or PC. spellNum can be any valid spellNum (0=>63).
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.CastSpell( 32 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SysMessage">SysMessage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SysMessage( string message, ... );</pre>
<tr><td class="property">Purpose		<td class="value">Sends a string as a sysmessage. Accepts up to 10 additional arguments which can be injected into the string as needed.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.SysMessage( "Isn't the world great?" );
myChar.SysMessage( GetDictionaryEntry(388), myNPC.name ); // Hello sir! My name is %s and I will be working for you.
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="MagicEffect">MagicEffect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void MagicEffect( spellID );</pre>
<tr><td class="property">Purpose		<td class="value">Applies spell effects of specified spell to character.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.MagicEffect( 43 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="GetSerial">GetSerial</a>
<tr><td class="property">Prototype		<td class="value"><pre>int GetSerial( part );</pre>
<tr><td class="property">Purpose		<td class="value">Gets a part (1-4) of a character's serial
<tr><td class="property">Example of Usage	<td class="value"><pre>iSerial = myChar.GetSerial( 1 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="MakeMenu">MakeMenu</a>
<tr><td class="property">Prototype		<td class="value"><pre>void MakeMenu( mnu );</pre>
<tr><td class="property">Purpose		<td class="value">Opens up make menu mnu and sends it to sock
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.MakeMenu( 1 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Wander">Wander</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Wander( x1, y1, x2, y2 );
void Wander( x1, y1, radius );</pre>
<tr><td class="property">Purpose		<td class="value">Forces the npc to wander in the coordinates specified, 2 coords and a radius is a circle, 4 coords is a box.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myNPC.Wander( 5593, 1203, 5608, 1206 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Follow">Follow</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Follow( newmaster );</pre>
<tr><td class="property">Purpose		<td class="value">Forces the char to follow the new master.
<tr><td class="property">Example of Usage	<td class="value"><pre>myNPC.Follow( myChar );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Dismount">Dismount</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Dismount();</pre>
<tr><td class="property">Purpose		<td class="value">Dismounts a char.
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.Dismount();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SetPoisoned">SetPoisoned</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SetPoisoned( poisonLevel, Length )</pre>
<tr><td class="property">Purpose		<td class="value">Applies a specified level of poison to a character
for a specified amount of time (in milliseconds).
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.SetPoisoned( 2, 10000 );
//Gives myChar a 2nd level poison for 10 seconds.
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="ExplodeItem">ExplodeItem</a>
<tr><td class="property">Prototype		<td class="value"><pre>void ExplodeItem( myItem );</pre>
<tr><td class="property">Purpose		<td class="value">Deletes specified item by exploding it, dealing 5-10 dmg to nearby characters.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.ExplodeItem( myItem );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SetInvisible">SetInvisible</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SetInvisible( visibility, timeLength )</pre>
<tr><td class="property">Purpose		<td class="value">Sets character to the specified visibility level
for the specified amount of time (in milliseconds). NOTE: Timer seems to be broken, as character stays hidden forever.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.SetInvisible( 1, 1000 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SetInvisible">AddSpell</a>
<tr><td class="property">Prototype		<td class="value"><pre>void AddSpell( spellNum )</pre>
<tr><td class="property">Purpose		<td class="value">Adds specified spell to the first spellbook in character's pack
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.AddSpell( 3 ); //adds Feeblemind spell to myChar's spellbook (if he has one)
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SetInvisible">SpellFail</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SpellFail()</pre>
<tr><td class="property">Purpose		<td class="value">Does the actions associated in code with spell failure. Use after character fails to cast a spell, will play fail-effect, sound and give player default fail-message
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.SpellFail();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="ExecuteCommand">ExecuteCommand</a>
<tr><td class="property">Prototype		<td class="value"><pre>void ExecuteCommand( cmdString );</pre>
<tr><td class="property">Purpose		<td class="value">Executes the command cmdString(should include any params).
<tr><td class="property">Example of Usage	<td class="value"><pre>myChar.ExecuteCommand( "add 0x04a9" );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="WalkTo">WalkTo</a>
<tr><td class="property">Prototype		<td class="value"><pre>void WalkTo( object, maxsteps );<br>void WalkTo( x, y, maxsteps );</pre>
<tr><td class="property">Purpose		<td class="value">Makes the character walk to a specific location, halting if it takes too many steps.
<tr><td class="property">Example of Usage	<td class="value"><pre>myNPC.WalkTo( pUser, 10 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="RunTo">RunTo</a>
<tr><td class="property">Prototype		<td class="value"><pre>void RunTo( object, maxsteps );<br>void RunTo( x, y, maxsteps );</pre>
<tr><td class="property">Purpose		<td class="value">Makes the character run to a specific location, halting if it takes too many steps.
<tr><td class="property">Example of Usage	<td class="value"><pre>myNPC.RunTo( pUser, 10 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="OpenLayer">OpenLayer</a>
<tr><td class="property">Prototype		<td class="value"><pre>void OpenLayer( socket, layerToOpen )</pre>
<tr><td class="property">Purpose		<td class="value">Opens the specified layer of the character to the specified socket.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.OpenLayer( pSock, 0x15 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="BoltEffect">BoltEffect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void BoltEffect()</pre>
<tr><td class="property">Purpose		<td class="value">Plays the lightning bolt effect on specified character to all nearby players.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.BoltEffect();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Gate">Gate</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Gate( item )
void Gate( x, y, z, world )</pre>
<tr><td class="property">Purpose		<td class="value">Opens a gate to the location marked on an item, or to a specific set of coordinates
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Gate( targItem );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Recall">Recall</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Recall( item )</pre>
<tr><td class="property">Purpose		<td class="value">Recalls the character gate to the location marked on an item.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Recall( targItem );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Mark">Mark</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Mark( item )</pre>
<tr><td class="property">Purpose		<td class="value">Marks an item with the characters current location to be used later for recall or gate.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Mark( targItem );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SetSkillByName">SetSkillByName</a>
<tr><td class="property">Prototype		<td class="value"><pre>bool SetSkillByName( "skillName", value )</pre>
<tr><td class="property">Purpose		<td class="value">Sets the skill specified by name to the value specified (name must be the same as in skills.dfn, "ALLSKILLS" is also applicable.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.SetSkillByName( "alchemy", 1000 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Kill">Kill</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Kill()</pre>
<tr><td class="property">Purpose		<td class="value">Kills the character.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Kill();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Resurrect">Resurrect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Resurrect()</pre>
<tr><td class="property">Purpose		<td class="value">Resurrects the deceased character.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Resurrect();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Jail">Jail</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Jail()
void Jail( numSecsToJail )</pre>
<tr><td class="property">Purpose		<td class="value">Jails character for n seconds (if specified).
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Jail( 1000 );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Release">Release</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Release()</pre>
<tr><td class="property">Purpose		<td class="value">Releases the character from jail.
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Release();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SpawnNPC">SpawnNPC</a>
<tr><td class="property">Prototype		<td class="value"><pre>CChar SpawnNPC( "section", x, y, z, worldnumber )</pre>
<tr><td class="property">Purpose		<td class="value">Spawns a character from a DFN entry (section)
<tr><td class="property">Parameters		<td class="value">section - The entry string in npc-DFNs to spawn from.<br>x, y and z - The target location to spawn at<br>worldNumber - The world that it will spawn in (0 == britannia, 2 == ilshenar)
<tr><td class="property">Example of Usage	<td class="value"><pre>
function onUseChecked( pUser, iUsed )
{
	var nSpawned = SpawnNPC( "brownhorse", pUser.x, pUser.y, pUser.z, pUser.worldnumber );
	if( nSpawned != null )
		pUser.SysMessage( "Wheee - a brown horse just spawned at my location!" );
}
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Defense">Defense</a>
<tr><td class="property">Prototype		<td class="value"><pre>int Defense( hitLoc, damageType, doArmorDamage )</pre>
<tr><td class="property">Purpose		<td class="value">Returns the defense value against damageType of the armor item at the location hitLoc and does armor damage if needed
<tr><td class="property">Parameters		<td class="value">hitLoc = the hit location (0 the whole char, 1 the body, 2 the arms, 3 the head, 4 the legs, 5 the neck and 6 the rest), the damageType and if the armor gets damaged.
<tr><td class="property">Example of Usage	<td class="value"><pre>Get the defense value of the head armor against Physical damage and damage the armor:<br>value = mChar.Defense( 3, 1, true);
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr>
	<th colspan=3 bgcolor="maroon"><a name="Resist" id="Resist">Resist</a>
<tr><td class="property">Prototype		<td class="value"><pre>int Resist( resistanceType );
void Resist( resistanceType, amount );</pre>
<tr><td class="property">Purpose
<td class="value">Used to get/set the resistance type and amount of the object
<tr><td class="property">Parameters
<td class="value"><p>Current resistanceTypes are:<br>
  1 - Armor<br>
  2 - Light<br>
  3 - Water<br>
  4 - Cold<br>
  5 - Heat<br>
  6 - Energy<br>
  7 - Poison
  </p>
<tr><td class="property">Example of Usage	<td class="value"><pre>pUser.Resist( 1, 20 );
//or...
var coldResist = pUser.Resist( 4 );</pre>
</table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SpellMoveEffect">SpellMoveEffect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SpellMoveEffect( targetChar, mSpell )</pre>
<tr><td class="property">Purpose		<td class="value">Plays the MOVEFX effect of the specified spell in SPELLS.DFN, going from the character to the target
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
var spellNum	= mChar.spellCast;
var mSpell	= Spells[spellNum];
mChar.SpellMoveEffect( targetChar, mSpell );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="SpellStaticEffect">SpellStaticEffect</a>
<tr><td class="property">Prototype		<td class="value"><pre>void SpellStaticEffect( mSpell )</pre>
<tr><td class="property">Purpose		<td class="value">Play the STATFX effect specified for the specified spell in SPELLS.DFN, on the specificed character
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
var spellNum	= mChar.spellCast;
var mSpell	= Spells[spellNum];
targetChar.SpellStaticEffect( mSpell );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="BreakConcentration">BreakConcentration</a>
<tr><td class="property">Prototype		<td class="value"><pre>void BreakConcentration()
void BreakConcentration( socket )</pre>
<tr><td class="property">Purpose		<td class="value">Break a caster's concentration
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
myNPC.BreakConcentration(); //for NPCs, who have no sockets
myPlayer.BreakConcentration( mSocket ); //for players, who DO have sockets
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="FindItemType">FindItemType</a>
<tr><td class="property">Prototype		<td class="value"><pre>Item FindItemType( itemType )</pre>
<tr><td class="property">Purpose		<td class="value">Look for items of a certain type in character's pack
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
var spellBook = myPlayer.FindItemType( 9 ); //does the player have a spellbook?
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="InitWanderArea">InitWanderArea</a>
<tr><td class="property">Prototype		<td class="value"><pre>void InitWanderArea()</pre>
<tr><td class="property">Purpose		<td class="value">Initialize a WanderArea (10x10 box, or 10 radius circle) for the specified NPC. Will only work if they already have a wandermode set to box or circle.
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
myNPC.InitWanderArea();
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="ReactOnDamage">ReactOnDamage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void ReactOnDamage( damageType ); <br>void ReactOnDamage( damageType, attacker );</pre>
<tr><td class="property">Purpose		<td class="value">Make a character react on damage
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.ReactOnDamage( 2 );
myChar.ReactOnDamage( 2, attackerChar );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Damage">Damage</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Damage( amount );
void Damage( amount, attacker );
void Damage( amount, attacker, doRepSys );</pre>
<tr><td class="property">Purpose		<td class="value">Cause damage to a character
<tr><td class="property">Parameters		<td class="value">doRepSys true/false = flag as criminal?
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Damage( 15 );
myChar.Damage( 15, attackerChar );
myChar.Damage( 15, attackerChar, true );
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="Heal">Heal</a>
<tr><td class="property">Prototype		<td class="value"><pre>void Heal( amount ); <br>void Heal( amount, attacker ); <br>void Heal( amount, attacker, doRepSys );</pre>
<tr><td class="property">Purpose		<td class="value">Heal a character
<tr><td class="property">Parameters		<td class="value">
<tr><td class="property">Example of Usage	<td class="value"><pre>
myChar.Heal( 15 );
myChar.Heal( 15, healerChar );
</pre></table>

<p>&nbsp;</p><center>
<font face="Tahoma,Arial,MS Sans Serif" size="1">Original: ©Copyright 2000-2001 <a href="http://www.uox3.net">WWW.UOX3.NET</a> (Daniel Stratton/Matthew Randall)</font> |||
<font face="Tahoma,Arial,MS Sans Serif" size="1">Rewrite: ©Copyright 2002 <a href="http://www.uoxdev.de">WWW.UOXDEV.DE</a> (Florian "Rukus" Frick)</font> |||
<font face="Tahoma,Arial,MS Sans Serif" size="1">Re-Rewrite and further updates: @Copyright 2003-2012 <a href="http://www.uox3.org">WWW.UOX3.ORG</a> Xuri</font>
</center>
</body>