<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>UOX3 API and Event handling document</title>
<style></style>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
<center>
<h1>UOX3 Script Engine</h1>
<h3>Functions, Methods, Properties and Event handling</h3>
</center>
<h3><a name="CharFuncs">Item Related Methods</a></h3>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="CreateDFNItem">CreateDFNItem</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEM CreateDFNItem( socket, character, sectionToMake, [int Amount], [objectType], [bool inPack] );
ITEM CreateDFNItem( null, null, sectionToMake, [int Amount], [objectType], false, [worldNumber], [instanceID] );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Spawns an item from a DFN section number/id.
<tr><td valign="top" width="25%"><b>Notes</b><td><b>Parameters:</b><br>socket - socket to refresh to (and ensure weight is added)<br>character - required to know the pack/character to spawn it to<br>sectionToMake - section # to spawn from<br>int Amount - Amount of items to spawn (Optional)<br>objectType - specify the type of object being added: "ITEM", "SPAWNER"<br>bool inPack - True/false whether to spawn in pack or not (Optional - default is FALSE).<br>
Function can also be used to add items without relying on a character. In this case, the socket and character parameters are null, the inPack parameter is false, and two additional parameters are provided - worldNumber and instanceID
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
function onUseChecked( pUser, iUsed )
{
	var myItem = CreateDFNItem( pUser.socket, pUser, "0x09d0", 10, "ITEM", true );
	pUser.SysMessage( "Oh my, 10 apples just appeared in my backpack! Magic!" );
}

function onUseChecked( pUser, iUsed )
{
	var myItem = CreateDFNItem( null, null, "0x09d0", 10, "ITEM", false, iUsed.worldnumber, iUsed.instanceID );
	iUsed.TextMessage( "Oh my, 10 apples just spawned on top of me! Magic!" );
}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="CreateBlankItem">CreateBlankItem</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEM CreateBlankItem( socket, character, amount, itemName, itemID, colour, objectType, inPack );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Spawns a "blank" item with values from the UO client's tiledata file.
<tr><td valign="top" width="25%"><b>Notes</b><td><b>Parameters:</b><br>socket - socket to refresh to (and ensure weight is added)<br>character - required to know the pack/character to spawn it to<br>amount - The amount of items to spawn<br>itemName - the name to give to the newly spawned item<br>itemID - itemID(hex) to spawn item from<br>colour - colour of the spawned item<br>objectType - specify the type of object being added: "ITEM", "SPAWNER"<br>inPack - True/false whether to spawn in pack or not<br>bSend - Whether or not to send update to all players
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
function onUseChecked( pUser, iUsed )
{
	var myItem = CreateBlankItem( pUser.socket, pUser, 10, "apple", 0x09d0, 0x0, "ITEM", true );
	pUser.SysMessage( "Oh my, 10 apples just appeared in my backpack! Magic!" );
}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="FindRootContainer">FindRootContainer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEM FindRootContainer( iObj );
ITEM FindRootContainer( iObjSerial );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Finds the root container of a provided item object, or item object serial - if any
<tr><td valign="top" width="25%"><b>Notes</b><td><b>Parameters:</b><br>iObj - item to find root container for<br>iObjSerial - item serial to find root container for
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
function onUseChecked( pUser, iUsed )
{
	var rootContainer = FindRootContainer( iUsed );
	if( ValidateObject( rootContainer ))
		pUser.TextMessage( "The item is in a container! The root container's name is " + rootContainer.name );
	else
		pUser.TextMessage( "The item has no root container." );
}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="GetSerial">GetSerial</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetSerial( part );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Gets part (1-4) of an object's serial.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iSerial = myItem.GetSerial( 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="HasSpell">HasSpell</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>bool HasSpell( spellNum );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Scans through player's contents to see if they have spellNum in the first spellbook encountered
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>if(myPlayer.HasSpell( 0 )==1);
</pre></table>

<p>&nbsp;</p>
<table class="method">
<tr><th colspan=3 bgcolor="maroon"><a name="InRange">InRange</a>
<tr><td class="property">Prototype		<td class="value"><pre>bool InRange( trgObj, distance );</pre>
<tr><td class="property">Purpose		<td class="value">Returns true if the distance to trgObj is less than distance
<tr><td class="property">Example of Usage	<td class="value"><pre>if( myItem.InRange( trgObj, 18 ))
	{
		myItem.TextMessage( "I'm within range!" );
	}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="LockDown">LockDown</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void LockDown( );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Locks item down (sets movable value to 3).
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.LockDown();
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="OpenPlank">OpenPlank</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void OpenPlank()
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Opens the plank of a boat.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myPlank.OpenPlank()
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="RemoveSpell">RemoveSpell</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void RemoveSpell( spellNum );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Removes spellNum from player's spellbook
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.RemoveSpell( 0 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SetCont">SetCont</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void SetCont( object );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the container of the item to the specified object.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.SetCont( mChar );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SetPoison">SetPoison</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void SetPoison ( poisonLevel );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets a specified level of posion for an item/weapon.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
myItem.SetPoison( 2 );
//Applies level 2 poison to item
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SoundEffect">SoundEffect</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void SoundEffect( soundID, bAllHear );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Plays a sound from Character. SoundID is the full ID of the sound to play. If bAllHear is TRUE, then everyone nearby hears it. If it's false, then only the Character hears it. NOTE: Soundlist
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.SoundEffect( 568, TRUE );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="StartTimer">StartTimer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void StartTimer( numMiliSec, timerID, callBack );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Starts a timer that will elapse after numHundredthsOfSec seconds pass, for an item tItem. timerID must be between 0 and 100. Resulting onTimer event will be triggered. Which script it triggers in depends on the (optional, defaults to false) third parameter, which can be <strong>true</strong> (calls back to existing script), <strong>false</strong> (calls back into object's script) or an <strong>int</strong> (scriptID to call back to). This optional parameter defaults to false if not specified.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.StartTimer( 600, 0, true );</br>
myChar.StartTimer( 1200, 0, false ); //Timer calls back to existing script</br>
myChar.StartTimer( 1200, 0, 2012 ); //Timer calls back to script with ID 2012
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="Glow">Glow</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void Glow( socket );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Causes the object to begin glowing.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.Glow( pSock );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="UnGlow">UnGlow</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void UnGlow( socket );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Causes the object to stop glowing.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.UnGlow( pSock );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="PlaceInPack">PlaceInPack</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void PlaceInPack();
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Randomly sets the placement of an item inside the container it is in.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.PlaceInPack();
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="Dupe">Dupe</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void Dupe( socket );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Creates a duplicate of the item in character's pack
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.Dupe( mySock );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="Carve">Carve</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void Carve( socket );
</pre>
<tr><td valign="top" width="25%"><b>Purpose</b>
<td>Makes the character belonging to socket carve up a corpse
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myCorpse.Carve( socket );</pre>
</table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="Refresh">Refresh</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void Refresh();
</pre>
<tr><td valign="top" width="25%"><b>Purpose</b>
<td>Causes the item to be refreshed to sockets that can see it
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>myItem.Refresh();</pre>
</table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="GetTileName">GetTileName</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void GetTileName();
</pre>
<tr><td valign="top" width="25%"><b>Purpose</b>
<td>Fetches item name, and looks in tiledata for name if no name is specified for object (or name is "#")
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var itemName = myItem.GetTileName();</pre>
</table>

<p>&nbsp;</p><center>
<font face="Tahoma,Arial,MS Sans Serif" size="1">©Copyright 2000-2001 <a href="http://www.uox3.net">WWW.UOX3.NET</a> (Daniel Stratton/Matthew Randall)</font>
</center>
</body>
