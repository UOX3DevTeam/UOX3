<html>

<head>
<title>UOX3 API and Event handling document</title>
<style></style>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body bgcolor="#333399" text="#999999" link="lightblue" aLink="red" vLink="red">
<center>
	<h1>UOX3 Script Engine</h1>
	<h3>API and Event handling</h3>
</center>

<h3><a name="ItemFuncs">Item Related Functions</a></h3>

<table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetAmount">GetAmount</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>short GetAmount( int trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the amount of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>amt = GetAmount( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetContainer">GetContainer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>long GetContainer( int trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the serial of the container of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>cSerial = GetContainer( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetAmount">SetAmount</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetAmount( trgItem, trgAmount );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's amount value to trgAmount
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetAmount( trgItem, 10 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetContainer">SetContainer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetContainer( trgItem, newContSerial );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the trgItem's container SERIAL to newContSerial
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetContainer( trgItem, GetSerial( srcChar, 0 ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SpawnItem">SpawnItem</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEM SpawnItem( bpSocket, bpChar, bpSectNumber, bpRandValue );<br>ITEM SpawnItem( Socket, character, amount, itemName, stackable, itemID, colour, inPack, bSend );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Spawns an item from a section number (4 parameter function) or of a particular ID (9 parameter function).
<tr><td valign="top" width="25%"><b>Notes</b><td><b>4 param function</b><br>bpSocket - socket to refresh to (and ensure weight is added)<br>bpChar - required to know the pack to spawn it in<br>bpSectNumber - section # to spawn from<br>bpRandValue - if true, the item's value and HP is randomized<br><b>9 param function</b><br>Socket - socket to update/refresh (can be -1)<br>character - character involved in creation of the item<br>amount - # of items to make<br>itemName - name of the item (if any).  To use default, pass "#".<br>stackable - true if the item is stackable<br>itemID - the ID of the item<br>colour - the colour of the item<br>inPack - true if the item is placed in the character's pack<br>bSend - true if the item is sent to all players in range.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetType">GetType</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetType( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns type of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iType = GetType( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetType">SetType</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetType( trgItem, trgType );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's type to trgType
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetType( srcItem, 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMore">GetMore</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMore( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns MORE value of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iMore = GetMore( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMoreX">GetMoreX</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMoreX( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns MOREX value of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iMore = GetMoreX( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMoreY">GetMoreY</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMoreY( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns MOREY value of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iMore = GetMoreY( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMoreZ">GetMoreZ</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMoreZ( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns MOREZ value of trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>iMore = GetMoreZ( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetMore">SetMore</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetMore( trgItem, newMore );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's more value to newMore
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetMore( doorItem, GetMore( key ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetMoreX">SetMoreX</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetMoreX( trgItem, newMore );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's morex value to newMore
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetMoreX( doorItem, GetMore( key ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetMoreY">SetMoreY</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetMoreY( trgItem, newMore );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's moreY value to newMore
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetMoreY( doorItem, GetMore( key ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetMoreZ">SetMoreZ</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetMoreZ( trgItem, newMore );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's morez value to newMore
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetMoreZ( doorItem, GetMore( key ) );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMovable">GetMovable</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMovable( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns movability of an item
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iMov = GetMovable( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetMovable">SetMovable</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetMovable( trgItem, newMove );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the trgItem's movable property to newMove
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetMovable( srcItem, 3 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetAtt">GetAtt</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetAtt( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns attack value of an item, random between lo and hi damage
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iAttack = GetAtt( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetAtt">SetAtt</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetAtt( trgItem, loDamage, hiDamage );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the low and high damage inflicted by trgItem
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetAtt( srcItem, 0, 10 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetDef">GetDef</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetDef( trgItem );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns defense value of an item
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iDef = GetDef( srcItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetDef">SetDef</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetDef( trgItem, defValue );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets trgItem's def value to defValue
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetDef( srcItem, 10 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GlowItem">GlowItem</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetResourceCount">GetResourceCount</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>GetResourceCount( player, itemID, itemColour );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns a count of how many items with id itemID and colour itemColour player has
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var ingotAmt = GetResourceCount( player, 0x1BF2, 0 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_UseResource">UseResource</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>UseResource( player, itemID, itemColour, amount );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Deletes amount number of items with id itemID and colour itemColour on player
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>UseResource( player, 0x1BF2, 0, 5 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_FindItemOnLayer">FindItemOnLayer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int FindItemOnLayer( player, tLayer );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Finds the item that player has on layer tLayer.  
<tr><td valign="top" width="25%"><b>Notes</b><td>A return value of -1 indicates there was no item at that particular layer. A common list of layers follow<br>
<br>0x01	- Single-Hand item/weapon
<br>0x02	- Two-Hand item/weapon (including Shield)
<br>0x03	- Foot Covering/Armor
<br>0x04	- Leg Covering (including Pants, Shorts, Bone/Chain/Ring legs)
<br>0x05	- Chest Clothing/Female Chest Armor
<br>0x06	- Head Covering/Armor
<br>0x07	- Hand Covering/Armor
<br>0x08	- Ring
<br>0x09	- N/A (not used)
<br>0x0A	- Neck Covering/Armor
<br>0x0B	- Hair
<br>0x0C	- Waist (Half-Apron)
<br>0x0D	- Torso (inner)(Chest Armor)
<br>0x0E	- Bracelet
<br>0x0F	- N/A (no info)
<br>0x10	- Facial Hair
<br>0x11	- Torso (Middle)(Surcoat, Tunic, Full Apron, Sash)
<br>0x12	- Earrings
<br>0x13	- Arm Covering/Armor
<br>0x14	- Back (Cloak)
<br>0x15	- BackPack
<br>0x16	- Torso (outer)(Robe)
<br>0x17	- Legs (outer)(Skirt/Kilt)
<br>0x18	- Legs (inner)(Leg Armor)
<br>0x19	- Mount (Horse, Ostard, etc.)
<br>0x1A	- NPC Buy Restock Container
<br>0x1B	- NPC Buy No Restock Container
<br>0x1C	- NPC Sell Container
<br>0x1D	- Bank Box
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iLeftHand = FindItemOnLayer( pTalking, 1 );	// finds the item in the left hand of pTalking
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetLayer">GetLayer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>GetLayer( iToCheck );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the layer attribute of the item iToCheck
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iLayer = GetLayer( iStolen );
<br>if( iLayer == 0x15 )
<br>{
<br>	TextMessage( pThief, "Wow, I stole a pack" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SetLayer">SetLayer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetLayer( iToCheck, iLayer );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets the layer attribute of the item iToCheck to iLayer
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iLayer = GetLayer( iStolen );
<br>if( iLayer == 0x15 )
<br>{
<br>	SetLayer( iStolen, 0x01 );
<br>	TextMessage( pThief, "Mwahaha, this pack is now useless!" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_FirstItemInCont">FirstItemInCont</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int FirstItemInCont( iToScan );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns a handle to the first item in the container.  If it's -1, then there is no items.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iStuff;
<br>var myGold = 0;
<br>for( iStuff = FirstItemInCont( iStolen ); !FinishedItemInCont( iStolen ); iStuff = NextItemInCont( iStolen );
<br>{
<br>	if( iStuff != -1 && GetID( iStuff, 1 ) == 0x0EED ) // we have gold!
<br>	{
<br>		myGold = myGold + GetAmount( iStuff );
<br>	}
<br>}
<br>if( myGold > 10000 ) 
<br>{
<br>	TextMessage( pThief, "I'm RICH!!!!!!!" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_NextItemInCont">NextItemInCont</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int NextItemInCont( iToCheck );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the next item found in the container
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SEE ABOVE FUNCTION
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_FinishedItemInCont">FinishedItemInCont</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>bool FinishedItemInCont( iToCheck );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns true if there are no more items left to look through
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SEE ABOVE FUNCTION
</pre></table>

<p>&nbsp;</p><center>
<font face="Tahoma,Arial,MS Sans Serif" size="1">©Copyright 2000-2001 <a href="http://www.uox3.net">WWW.UOX3.NET</a> (Daniel Stratton/Matthew Randall)</font>
</center>

</body>