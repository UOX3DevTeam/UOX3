<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>UOX3 API and Event handling document</title>
<style></style>
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
<center>
	<h1>UOX3 Script Engine</h1>
	<h3>API and Event handling</h3>
</center>

<h3><a name="MiscFuncs">Miscellaneous Functions</a></h3>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_RollDice">RollDice</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int RollDice( numDie, faces, addition );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Rolls a faces sided die numDie times and adds addition. The example is for a DnD style dice like: 2d3+1
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var mDie = RollDice( 2, 3, 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="ScriptPrintNumber">ScriptPrintNumber</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ScriptPrintNumber( number );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Prints out a number to the console
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>ScriptPrintNumber( 5 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SetShowLayer">SetShowLayer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>SetShowLayer( number );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets showlayer true (if number == 1) or false 
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SetShowLayer( 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="GetShowLayer">GetShowLayer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetShowLayer();
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns value of showlayer
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iLayer = GetShowLayer();
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_RandomNumber">RandomNumber</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int RandomNumber( loNum, hiNum );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns a random number between loNum and hiNum
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var iNum = RandomNumber( 0, 10 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_CalcCharFromSer">CalcCharFromSer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>CHARACTER CalcCharFromSer( cSerial );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the item with serial cSerial.  Returns null if it doesn't exist
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var trgChar = CalcCharFromSer( cSerial );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_CalcItemFromSer">CalcItemFromSer</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>ITEM CalcItemFromSer( iSerial );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the item with serial iSerial.  Returns null if it doesn't exist
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var trgItem = CalcItemFromSer( iSerial );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_RegisterKey">RegisterKey</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_UnregisterKey">UnregisterKey</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetMurderThreshold">GetMurderThreshold</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>int GetMurderThreshold();
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the number of kills needed to go red.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>if( GetMurderThreshold() > GetMurderCount( pTalking ) )
<br>{
<br>	TextMessage( pTalkingTo, "Surely sir, you must be a murderer.  I bid you adieu" );
<br>	EmoteMessage( pTalkingTo, "*scampers off*" );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTileIDAtMapCoord">GetTileIDAtMapCoord</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>char DirectionTo( xLoc, yLoc, worldNumber );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns ID of the tile at xLoc and yLoc in world worldNumber
<tr><td valign="top" width="25%"><b>Example of Usage</b><td>
<pre>
var MapTile = GetTileIDAtMapCoord( 0, 0, 0 ); // gets tile at 0,0 in Britannia
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_TriggerEvent">TriggerEvent</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>TriggerEvent( scriptID, "functionName", argument1, argument2 );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Calls the JScript that uses scriptID, runs function
which is called "functionName", along with the arguments defined afterwards, seperated by commas.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td>
<pre>
TriggerEvent( 8000, "onUse", pUser, pItem );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_AreaCharacterFunction">AreaCharacterFunction</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>AreaCharacterFunction( "myAreaFunc", radiusObject, radius, socket );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Allows script to work with every that is found in the radius
of the radiusObject (item or character), for the purpose of area-effects.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td>
<pre>
function onUse( pUser, pSock );
{
	AreaCharacterFunction( "myAreaFunc", pUser, 10, pSock );
}
function myAreaFunc( srcChar, trgChar, pSock )
{
	trgChar.TextMessage( "Oh no I've been found!" );
	pSock.SysMessage( "Found " + trgChar.name );
}</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_UseDoor">UseDoor</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>UseDoor( iSock, iToUse );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Uses the door iToUse.  iSock is used for message display.  If unknown, use -1.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>if( GetType( iUsed ) == 12 )
<br>{
<br>	TextMessage( pUser, "I just LURV using doors" );
<br>	UseDoor( -1, iUsed );
<br>}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_SendStaticStats">SendStaticStats</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void SendStaticStats( socket );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Builds a gump with map and tile information on the targeted location.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>SendStaticStats( mSock );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_GetTileHeight">GetTileHeight</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>signed char GetTileHeight( tileID );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Returns the map height of the specified tile.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>object.z = GetTileHeight( targTile );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_IterateOver">IterateOver</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>unsigned int IterateOver( objectType );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Iterates over all objects of specified type in the world.
<tr><td valign="top" width="25%"><b>Extra Info</b><td>For every object it comes across, the iterator will call onIterate( object ) in the calling script.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var count = IterateOver( "ITEM" );
function onIterate( toCheck )
{
	toCheck.TextMessage( "I'm an item!" );
	return true;
}
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_WorldBrightLevel">WorldBrightLevel</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>unsigned char WorldBrightLevel( [lightlevel] );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets and returns the bright light level of the world.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>WorldBrightLevel( 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_WorldDarkLevel">WorldDarkLevel</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>unsigned char WorldDarkLevel( [lightlevel] );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets and returns the dark light level of the world.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>var darkLight = WorldDarkLevel();
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_WorldDungeonLevel">WorldDungeonLevel</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>unsigned char WorldDungeonLevel( [lightlevel] );
</pre><tr><td valign="top" width="25%"><b>Purpose</b><td>Sets and returns the dungeon light level of the world.
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>WorldDungeonLevel( 1 );
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_ValidateObject">ValidateObject</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>bool ValidateObject( object );
</pre>
<tr><td valign="top" width="25%"><b>Purpose</b>
<td>Returns true if argument is validated as an object
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
if( !ValidateObject( pUser ) )
	return;
</pre></table>

<p>&nbsp;</p><table border="1" width="100%" cellspacing="0">
<tr><th colspan=3 bgcolor="maroon"><a name="SE_ReloadJSFile">ReloadJSFile</a>
<tr><td valign="top" width="25%"><b>Prototype</b><td><pre>void ReloadJSFile( scriptID );
</pre>
<tr><td valign="top" width="25%"><b>Purpose</b>
<td>Reloads a specified JavaScript file depending on scriptID from jse_fileassociations.scp
<tr><td valign="top" width="25%"><b>Example of Usage</b><td><pre>
function CommandRegistration()
{
	RegisterCommand( "reloadjsfile", 3, true ); //Reload JavaScript file
}

function command_RELOADJSFILE( socket, cmdString )
{
	var scriptID = parseInt( cmdString );
	socket.SysMessage( "Attempting Reload of JavaScript (ScriptID " + cmdString + ")" );
	ReloadJSFile( scriptID );
}</pre>
</table>

<center>
<font face="Tahoma,Arial,MS Sans Serif" size="1">©Copyright 2000-2001 <a href="http://www.uox3.net">WWW.UOX3.NET</a> (Daniel Stratton/Matthew Randall)</font>
</center>


</body>