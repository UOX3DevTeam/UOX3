<html>
<head>
<title>Building Subterranean Levels</title>
</head>
<body>
<center>
<h1>Building Subterranean Levels</h1>
<h2>(i.e. Caves and Basements)</h2>
<h3>A Tutorial by Stonehand</h3>
</center>
<p>The cool thing about a cave or basement in UO is that the surrounding area turns very dark, and all you see is the level itself.  You can replicate this effect easily in UOX by following the steps in this guide.  The guide will be divided into two sections for simplicity.  One section will be devoted to the creation of caves, and the other to the creation of basement levels underneath buildings.</p>

<p>For this operation, I recommend the following tools: WorldForge, Xuri's WorldBuilder, and Mini Mythril (for faster repeated operations like 'remove or 'tweak).</p>

<h2>Basement Levels</h2>
<ul>
<li>You must use WorldForge to edit the map, and you must edit the map to place the tiles you need for this operation.
<li>Go into the game to the location you wish to place your house or basement level.  If you already know where you want to place your stairs, then go to that spot and record the coordinates of that location.  Then close the client, the server and Automap (these cannot be in use when you use WorldForge.
<li>Open WorldForge and go into the Map Editor.  Down at the bottom of the editor is a pair of windows you can use to enter the X and Y coordinates of your stairway.  Enter the coordinates and hit the "Jump Now!" button.
<li>Now you can move the mouse cursor over the tiles and you will see the exact coordinates of each tile displayed in the status bar at the lower left of the editor.  You will use this to find the precise tiles where you will place your staircase.
<li>Now use the tile selection window on the right side of the screen and locate the "no draw" tile (3rd tile down - number 00 02) and select it.
<li>Click the tiles where you want the staircase to be.  I made my "no draw" area to be 2 tiles wide by 6 tiles long, and that seems to work well for a normal stairwell.  This little patch of "no draw" tiles is your "passage" down to the next level.
<li>Now just close the map editor (the changes you made to your map are saved instantly as you make them, so be careful in what you change or click on.  Also, if your ground level is NOT at "0" then you will want to either set the z level to the level of your ground floor, or you will select "add z" and set the "z (altitude)" to 0.  If you will do that, your tile changes won't affect the z of the tiles on the map.  (Most of this gets to be self-explanatory once you use the editor).
<li>Now restart your server and client and go to the location of your stairs if you aren't there already.  You will see black and you will not be able to place anything on the black area.  That black area is a "portal" to a lower level that doesn't yet exist.  You need to make the lower level exist!
<li>Using Xuri's WorldBuilder is probably the easiest way to create the lower level.  Go to the "Floors" tab in WorldBuilder, and set the coordinates for the northwest corner of your basement floor, and the southeast coordinates.  And then set the z to 20 units lower than the floor on which you are standing.  If you want to use the "dungeon" wall tiles, you will need to set the z for the new floor to 22 units lower because those tiles are 22 units tall.  So if you are standing on a floor that is a "0" z, you will set the new floor to be -20, or -22 z.
<li>Now place the floor.  And when you do, you will be able to see the new basement floor through the black "no draw" tiles.  And you will be able to step through the hole and land on your new basement floor.
<li>You will have to add stairs (if you aren't familiar with adding stairs, see Xuri's tutorials for the details).  And you will have to add walls around your basement level.
<li>If you need to expand the basement, you can manually drop tiles onto existing tiles near the edge of the black area, and then use 'INCX or 'INCY to move the tile out over the black area.  If you are placing a lot of individual tiles in this manner you can set up macros using INCX and INCY or add those commands to Mini Mythril.  Or you can add more tiles for the floor with Xuri's WorldBuilder.
<li>13)	To place walls along the north and west sides of the basement, you will have to set the walls in by 1 tile.  They can be moved (again using INCX and INCY) out to the edge of your floor, or just left there.  I personally prefer to move them out to the edge of the floor, but this is another tedious and time-consuming operation.
</ul>
<p>That's all there is to it.  But there is one formal side note to add here: If you intend to add a multi-level basement - say five floors down - then START with the lowest level and build upwards.  Be sure to place a whole floor (or ceiling) over each level as you go.  You won't need additional "no draw" tiles between floors - only the ones you placed initially are necessary.  In short, if you are building a five level basement, with walls that are all 20 units tall, you will set the FIRST floor you create to -100 z (depending on the z of your main floor), and then build UPWARDs.  The stairwell between each of these levels can be a normal hole in the floor tiles.  The ONLY "no draw" tiles you need are the ones between the main level of the house and the first subterranean level below it.</p>
<h2>Caves and Caverns</h2>
<p>First, lets clarify something.  A "cave or cavern" is herein defined as "a subterranean area beneath a mountain range."  To create subterranean levels under non-mountainous areas, see the tutorial above.</p>
<ul>
<li>You must use WorldForge to edit the map, and you must edit the map to place the tiles you need for this operation. 
<li>Go into the game to the location you wish to place your cave entrance. Record the coordinates of that location.  You also NEED to go to the entrance of an existing cave or mine, and also record that location.  The reason for this is that you really need to SEE what a cave entrance looks like in the map editor before you can make one!  Once you have all your coordinates written down, close the client, the server and Automap (these cannot be in use when you use WorldForge.
<li>Open WorldForge and go into the Map Editor.  Down at the bottom of the editor is a pair of windows you can use to enter the X and Y coordinates of the existing cave entrance you chose.  Enter the coordinates and hit the "Jump Now!" button.  Now take a good look at the existing cave entrance, and make a few notes in regard to elevations.  Now enter the coordinates of the spot you chose to place your NEW cave entrance, and jump to that location.
<li>Now you can move the mouse cursor over the tiles and you will see the exact coordinates of each tile displayed in the status bar at the lower left of the editor.  You will use this to find the precise tiles where you will place the entrance to your cave.
<li>Now use the tile selection window on the right side of the screen and locate the cave entrance tiles (about 1/4 of the way down the list - numbers 01 D2 through 01 DB).  There are solid black tiles for the blank, black opening of the cave, and there are sides, upper left and right corners, and tops.
<li>Click the tile you need in the selection window, and then click the spot on the map where you want that tile to be placed.  Basically follow the example of the cave you looked at.  This part is tricky, because the elevations of each tile affect the way they display in the game.  My cave entrance LOOKS perfect from the outside, but some of the black tiles show up from the inside of the cave.  If you want to eliminate that, you will have to play with the elevations a bit.  The little patch of black tiles is your "portal" to the inside of your cave.
<li>When you finish perfecting the exterior look of your cave, and get the elevations right, close the map editor (the changes you made to your map are saved instantly as you make them, so be careful in what you change or click on.  Just keep in mind that you are seeing the cave entrance from DIRECTLY overhead, so it will APPEAR to be foreshortened.  The actual height of the cave will be determined by the elevations you set for each cave tile.  As a rule of thumb, you want the cave to be at least 35 units tall or you will not be able to get inside of it.  Also, the mountainous terrain over the top of your cave must be a minimum of about 40 units high, otherwise you will be blocked from moving around freely inside your cave.  If the mountain range is not high enough, raise the z setting in the editor, set the draw mode to "altitude only" and select "add z".  Then make a quick pass over the mountains that are over your cave to raise their elevations by the amount you set in the z option of the editor.
<li>Now restart your server and client and go to the location of your cave entrance if you aren't there already.  You will see creepy, black, gaping maw of your cave but you won't be able to enter it and will not be able to place anything on the black area.  That black area is a "portal" to a subterranean area that doesn't yet exist.  You need to place cave floor tiles INSIDE the mountain to make the cave actually exist!
<li>Using Xuri's WorldBuilder is probably the easiest way to create the cave floor, however, I choose not to use it because of a patterning problem that makes the floor look more like a carpet than the floor of a cave.  But if you wish to use WorldBuilder for this operation, go to the "Landscapes" tab in WorldBuilder, and set the coordinates for the northwest corner of your cavern floor, and the southeast coordinates (If you haven't performed this operation in WorldBuilder before, check out the WB readme file for help).  And then set the z to the same as the area immediately outside the cave. Now place the floor.  And when you do, you will be able to step through the hole into your brand new cave!
<li>Caves are not the same as dungeons.  The dungeons use vertical wall tiles that take a lot of tweaking and a lot of patient practice to get them to look natural.  Normal caves or "mines" don't have any vertical sides (go into one and check it out!) and just use the irregular-edged floor tiles to make the edges of the floor look natural.
<li>If you choose NOT to use Xuri's WorldBuilder (because of the tiling effect) then you will have to place the tiles singly and use the 'tweak command repetitiously to move them into place.  By dropping a tile in front of the cave entrance, you can use the 'INCX or 'INCY command to move the tile into the cave.  If you want to avoid the patterning of the floor, you will have to randomly select among the five cave floor tiles available and place them one by one, and move them one by one.  Always place the new tile on an existing tile that is next to the black where you want to place the new tile.  Using 'INCX and 'INCY you can set up macros to speed up the operations or you can add these two commands to Mini Mythril.
<li>If you place your cave under mountains, you will not be able to include slopes in your floors and multiple dungeon levels.  Those areas are "mapped" using WorldForge and then accessed via teleporters and triggers.  And since I haven't done any of that yet, I won't attempt to write a tutorial on the subjectJ
</ul>
<p>Well, I hope I didn't leave anything out and I hope all of this is useful to you.  The ultimate goal, after all, is to make this aspect of the game work very much like it does on an official OSI shard.</p>
</body>
</html>